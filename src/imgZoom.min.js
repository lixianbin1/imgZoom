"use strict";var _CurrentImage,iconBase64="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAiCAMAAADRYI/HAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEVQTFRFAAAAmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZRJfMRZfLRZfMSJfKSJfKbpiza5i1RpfLXZi9nTbd7wAAABd0Uk5TAP/8/fL7/vQKK/r4+S3////+/xRP/2yasflWAAABaElEQVR4nJ1U2XbFIAgcY5PuMV3S///UYm+UAZOYXh4EOTAOiAJFwibVKPuOA0GTfegVGWKUxAfNJTZg8R63F3uIYJeS0pBdVNCxGEZYDNQqN9cxSD1mYpDaszYH4MUxmQamHjgnBO/giMfCRdY4mvpPQLShpLN6QiQmYLAWBKSr8Zx1A1Ku5gKTUqIp5xzE9YSj48sBSO92OGHaB+nOyWseeLHegp8TAulNbBlskffbnBhyu+W4twMbME7N473nNfvfAt7R/U8Ms3mTapR9x4FZk33oFUnLIokfmktsTN+8x+3FTn8gviJU10awQQUdi5RgMVCr3FzHIHoMg9SetTkAL44Jg8waooWxgyM+CxdZFwOCExBtKOmsvgwIGKwFAelqfGfdgJSrucCklPgPENcTjl7WA5De7ZiEfZDunKx54MVaZz8nBNKb2DLYIj83EENutxz3dmADUvt473nN/reAd3T/E3H8AieyJXX6TiMLAAAAAElFTkSuQmCC",Version="0.9.4",Title="imgzoon-li",Author="lixianbin1",_cache={},_size={},_title="滚动缩放图片",_width="auto",_top="50%",_left="50%",_theme="day",_svgCache=!1;function imageToBase64(e,t){var i,n=e.endsWith(".svg")||e.includes("data:image/svg+xml");(_cache[e]||n)&&!_svgCache||((i=new Image).crossOrigin="Anonymous",i.onload=()=>{var e=document.createElement("canvas");e.width=i.naturalWidth,e.height=i.naturalHeight;e.getContext("2d").drawImage(i,0,0);e=e.toDataURL("image/png");_cache[i.src]=e,_size[i.src]={width:i.naturalWidth,height:i.naturalHeight},t&&t(e)},i.src=e,i.onerror=()=>{t&&t("无法访问图片")})}function imgLoad(){var e=document.querySelectorAll("img.imgZoom");_CurrentImage=_CurrentImage||e[0],e.forEach(e=>{var t=e.src,t=(t&&imageToBase64(t),e.getAttribute("data-src"));if(t){imageToBase64(t);const i=new Image;i.src=t,i.onload=()=>{e.src=i.src}}})}function create(){var e=_width,t=_title,i=_left,n=_top,o=("auto"==_width&&(e=1e3),document.getElementsByTagName("body")[0]),a=document.createElement("div");a.style.position="fixed",a.style.zIndex="9999",a.style.display="none",o.appendChild(a),a.innerHTML=`
    <div id="_imgzoom" class="_imgzoom_box" style="width:`+e+"px;position:fixed;top:"+n+";left:"+i+`;transform: translate(-50%,-50%);background:#fff;z-index: 1;-webkit-Img-select: none;-moz-Img-select: none;-ms-Img-select: none;user-select:       none;padding:5px 10px 25px;">
      <div class="header" style="">
        <p class="_imgzoom_title" style="margin:0;padding:8px 0">
        `+t+`
          <span style="float:right">
            <a id="imgzoom_check" class="imgzoom_check" href="javascript:;"  title="切换主题" style="background: url(`+iconBase64+`) no-repeat -51px 0;width:17px;height:17px;float:left;margin-left:10px;overflow:hidden;line-height:100px">切换主题</a>
            <a id="imgzoom_imglink" class="imgzoom_imglink" href="javascript:;" title="在新窗口打开" style="background: url(`+iconBase64+`) no-repeat 0 0;width:17px;height:17px;float:left;margin-left:10px;overflow:hidden;line-height:100px">在新窗口打开</a>
            <a id="imgzoom_resize" class="imgzoom_resize" href="javascipt:;" title="优化显示" style="background: url(`+iconBase64+`) no-repeat -17px 0;width:17px;height:17px;float:left;margin-left:10px;overflow:hidden;line-height:100px">优化显示</a>
            <a id="imgzoom_close" class="imgzoom_close" href="javascript:;" title="关闭" style="background: url(`+iconBase64+`) no-repeat -34px 0;width:17px;height:17px;float:left;margin-left:10px;overflow:hidden;line-height:100px">关闭</a>
          </span>
        </p>
      </div>
      <div style="position:relative;">
        <div class="last" style="display: block;position: absolute;width: 80px;height: 50%;top: 50%;transform: translateY(-50%);left:0;cursor: pointer;background:rgba(0,0,0,0);">
          <p class="_imgzoom_title _imgzoom_box" style="background:#fff;color:#000;position:absolute;top:40%;left:0;margin:0;padding:5px;font-size:12px;display:none">上一张</p>
        </div>
        <div class="next" style="display: block;position: absolute;width: 80px;height: 50%;top: 50%;transform: translateY(-50%);right:0;cursor: pointer;background:rgba(0,0,0,0);">
          <p class="_imgzoom_title _imgzoom_box" style="background:#fff;color:#000;position:absolute;top:40%;right:0;margin:0;padding:5px;font-size:12px;display:none;z-index">下一张</p>
        </div>
        <img id="net" src="" oncopy="return false;" style="width:100%;vertical-align: top;">
      </div>
    </div>
    <div class="imgzoom_shadow" style="position:fixed;width: 100%;height: 100%;background-color: rgb(0, 0, 0);top:0;left:0;opacity: 0.5;"/>
  </div>`}function lastnext(n){let e=document.getElementById("_imgzoom").getElementsByClassName(n)[0];e.addEventListener("mousemove",function(){e.getElementsByTagName("p")[0].style.display="block"}),e.addEventListener("mouseout",function(){e.getElementsByTagName("p")[0].style.display="none"}),e.addEventListener("mousedown",function(e){e.stopPropagation()}),e.addEventListener("click",()=>{let i=void 0;var t=document.getElementsByClassName("imgZoom");for(let e=0;e<t.length;e++)if("next"==n?t[e]===_CurrentImage&&e<t.length-1?i=t[e+1]:t[e]===_CurrentImage&&e===t.length-1&&(i=t[0]):t[e]===_CurrentImage&&0<e?i=t[e-1]:t[e]===_CurrentImage&&0===e&&(i=t[t.length-1]),i){_CurrentImage=i;let e,t=(e=_CurrentImage.alt||_title,_CurrentImage.src);_cache[i.src]&&(t=_cache[i.src]),document.getElementById("net").src=t,SetTitle(e);break}})}function mouseWheel(){var t=document.getElementById("_imgzoom");t.addEventListener("mousewheel",e=>{e.preventDefault(),Detail(e,t)}),t.addEventListener("DOMMouseScroll",e=>{e.preventDefault(),Detail(e,t)})}function Detail(e,t){var i;(e=e||window.event).wheelDelta<0?(e=Math.round(.9*t.offsetWidth),i=Math.round(.9*t.offsetHeight),(360<e||270<i)&&(t.style.width=e+"px")):(i=Math.round(1.1*t.offsetWidth),e=Math.round(1.1*t.offsetHeight),(i<82500||e<46500)&&(t.style.width=i+"px"))}function imgMove(){var o,a,l=document.getElementById("_imgzoom");function t(e){var t=e.screenX-o,i=e.screenY-a,e=(o=e.screenX,a=e.screenY,l.offsetTop),n=l.offsetLeft;l.style.top=e+i+"px",l.style.left=n+t+"px"}l.addEventListener("mousedown",function(e){e.preventDefault(),o=e.screenX,a=e.screenY,window.addEventListener("mousemove",t)}),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",t)})}function bing(){lastnext("last"),lastnext("next"),mouseWheel(),imgMove()}function inStr(e,t){var i,n=!1,o=e.split(" ");for(i in o)o[i]==t&&(n=!0);return n}function Open(e){var t,i=document.getElementById("_imgzoom"),n=document.getElementsByClassName("imgZoom");_CurrentImage=e;let o;o=_CurrentImage&&_CurrentImage.alt?_CurrentImage.alt:_title,e&&e.src?(i&&0<n.length&&(t=document.getElementById("net"),_cache[e.src]?t.src=_cache[e.src]:(t.src=e.src,imgLoad())),i.style.top=_top,i.style.left=_left,i.style.width=_width+"px",SetTitle(o),Resize(e),i.parentElement.style.display="block"):0<n.length?Open(n[0]):console.error('F02: Missing parameters "src"')}function Close(){var e=document.getElementById("_imgzoom");e&&(e.parentElement.style.display="none")}function Resize(t){const i=(e,t)=>{e/=t;e<=window.innerWidth/window.innerHeight?(t=(window.innerHeight-350)*e,n.style.width=t+"px"):n.style.width=window.innerWidth-200+"px"};t&&(t.preventDefault?t.preventDefault():t.returnValue=!1);t=document.getElementById("net").src;let n=document.getElementById("_imgzoom");var e=_CurrentImage.src;if(_size[e])i(_size[e].width,_size[e].height);else{console.log(555);let e=new Image;e.src=t,e.complete?i(e.width,e.height):e.onload=function(){i(e.width,e.height)}}}function ThemeSwitch(e,t){t&&(t.preventDefault?t.preventDefault():t.returnValue=!1),e&&(_theme=e),Array.from(document.getElementsByClassName("_imgzoom_box")).forEach(e=>{e.style.backgroundColor="day"==_theme?"black":"white"}),Array.from(document.getElementsByClassName("_imgzoom_title")).forEach(e=>{e.style.color="day"==_theme?"white":"black"}),_theme="night"==_theme?"day":"night"}function targetImg(e){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1),_CurrentImage?window.open(_CurrentImage.src):console.error('F01: Imgzoom is not initialized, please execute "imgZoom.init()"')}function SetOption(e){e.width&&(_width=e.width),e.title&&(_title=e.title),e.top&&(_top=e.top),e.left&&(_left=e.left),e.theme&&(_theme=e.theme),e.svgCache&&(_svgCache=e.svgCache)}function SetTitle(e){try{document.querySelector("p._imgzoom_title").firstChild.nodeValue=e}catch(e){console.log(e)}}function isPE(){return/Android|webOS|iPhone|ipod|ipad|BlackBerry/i.test(navigator.userAgent)}function start(){create(),bing(),document.addEventListener("click",e=>{var t=e.target;"IMG"==t.nodeName&&inStr(t.className,"imgZoom")&&Open(t),(inStr(t.className,"imgzoom_shadow")||inStr(t.className,"imgzoom_close"))&&Close(),inStr(t.className,"imgzoom_resize")&&Resize(e),inStr(t.className,"imgzoom_check")&&ThemeSwitch(null,e),inStr(t.className,"imgzoom_imglink")&&targetImg(e)})}var imgZoom={Version:Version,Title:Title,Author:Author,init:function(){return imgLoad(),start(),{SetOption:SetOption,SetTitle:SetTitle,Open:Open,Close:Close,ThemeSwitch:ThemeSwitch}}};export default imgZoom;