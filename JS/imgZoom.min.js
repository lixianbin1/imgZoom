"use strict";var imgZoom=function(){function e(e){var t=document.getElementsByTagName("body")[0],n=document.createElement("div");t.appendChild(n),n.innerHTML='<div id="_imgzoom" style="width:'+c.width+'px;position:fixed;top: 460px;left:50%;transform: translate(-50%,-50%);background:#fff;z-index: 1;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:       none;padding:5px 10px 25px;">        <div class="header" style="">            <p style="margin:0;padding:8px 0">滚动滚轮缩放图片              <span style="float:right">                <a id="imgzoom_imglink" class="imglink" target="_blank" title="在新窗口打开" href="'+e+'" style="background: url(data:image/gif;base64,R0lGODlhYQA4AKIAAAAAAP///0SXzJmZmf///wAAAAAAAAAAACH5BAEAAAQALAAAAABhADgAAAP/SLo7/o7JSRW8uOqKeyQdGG6k6I2ldq4ZA6XbR8rw9MyX+tZURDcDEa8XLO2Iwd9QWOwJl65m7Ia0SKFKIjQK7Fqz1OdWjMryZLfwkesdo1viLS0HNI919aMd9gt/r1p3ZHB7KXNraxyAS290cVhNaY2LEoWGlJWYfJGceUaamyAqj4ygf5+CTIs+pjiXfjaWqLNuhSweqbeOcrqSt6l/LMC9rcDGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8TwC9PX0qfb5+sD6/fcE/QAGvOOvoKCCCPcxsHdQQIp/Y+qRUEghX0OBFR1C3LJRkAPDChI7LrnnECRGgiUnSsxYUuQQlxNg1oBIM+VHCStPRrRJUSaMmhqBplw41OdDnhYVGC2xManSnM+E5lyqEmfHmx6HckR6k+qGplixgtQKRWrNi0+DcmVKdmTbmG9n8lwglC0+jR51bj261OvXoBn1lo1LFCpcwj8RP22IOKG/u44Nu41MMrIxyor5OiaQAAA7) no-repeat 0 0;width:17px;height:17px;float:left;margin-left:10px;overflow:hidden;line-height:100px">在新窗口打开</a>                <a id="imgzoom_adjust" onclick="imgZoom.resize()" href="javascipt:;" class="imgadjust" title="优化显示" style="background: url(data:image/gif;base64,R0lGODlhYQA4AKIAAAAAAP///0SXzJmZmf///wAAAAAAAAAAACH5BAEAAAQALAAAAABhADgAAAP/SLo7/o7JSRW8uOqKeyQdGG6k6I2ldq4ZA6XbR8rw9MyX+tZURDcDEa8XLO2Iwd9QWOwJl65m7Ia0SKFKIjQK7Fqz1OdWjMryZLfwkesdo1viLS0HNI919aMd9gt/r1p3ZHB7KXNraxyAS290cVhNaY2LEoWGlJWYfJGceUaamyAqj4ygf5+CTIs+pjiXfjaWqLNuhSweqbeOcrqSt6l/LMC9rcDGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8TwC9PX0qfb5+sD6/fcE/QAGvOOvoKCCCPcxsHdQQIp/Y+qRUEghX0OBFR1C3LJRkAPDChI7LrnnECRGgiUnSsxYUuQQlxNg1oBIM+VHCStPRrRJUSaMmhqBplw41OdDnhYVGC2xManSnM+E5lyqEmfHmx6HckR6k+qGplixgtQKRWrNi0+DcmVKdmTbmG9n8lwglC0+jR51bj261OvXoBn1lo1LFCpcwj8RP22IOKG/u44Nu41MMrIxyor5OiaQAAA7) no-repeat -40px 0;width:17px;height:17px;float:left;margin-left:10px;overflow:hidden;line-height:100px">优化显示</a>                <a href="javascript:;" onclick="imgZoom.hideMenu()" class="imgclose" title="关闭" style="background: url(data:image/gif;base64,R0lGODlhYQA4AKIAAAAAAP///0SXzJmZmf///wAAAAAAAAAAACH5BAEAAAQALAAAAABhADgAAAP/SLo7/o7JSRW8uOqKeyQdGG6k6I2ldq4ZA6XbR8rw9MyX+tZURDcDEa8XLO2Iwd9QWOwJl65m7Ia0SKFKIjQK7Fqz1OdWjMryZLfwkesdo1viLS0HNI919aMd9gt/r1p3ZHB7KXNraxyAS290cVhNaY2LEoWGlJWYfJGceUaamyAqj4ygf5+CTIs+pjiXfjaWqLNuhSweqbeOcrqSt6l/LMC9rcDGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8TwC9PX0qfb5+sD6/fcE/QAGvOOvoKCCCPcxsHdQQIp/Y+qRUEghX0OBFR1C3LJRkAPDChI7LrnnECRGgiUnSsxYUuQQlxNg1oBIM+VHCStPRrRJUSaMmhqBplw41OdDnhYVGC2xManSnM+E5lyqEmfHmx6HckR6k+qGplixgtQKRWrNi0+DcmVKdmTbmG9n8lwglC0+jR51bj261OvXoBn1lo1LFCpcwj8RP22IOKG/u44Nu41MMrIxyor5OiaQAAA7) no-repeat -80px 0;width:17px;height:17px;float:left;margin-left:10px;overflow:hidden;line-height:100px">关闭</a>              </span>            </p>        </div>        <div style="position:relative;">          <div class="last" style="display: block;position: absolute;width: 80px;height: 100%;left:0;cursor: pointer;">              <p style="background:#fff;color:#000;position:absolute;top:40%;left:0;margin:0;padding:5px;font-size:12px;display:none">上一张</p>          </div>            <div class="next" style="display: block;position: absolute;width: 80px;height: 100%;right:0;cursor: pointer;">              <p style="background:#fff;color:#000;position:absolute;top:40%;right:0;margin:0;padding:5px;font-size:12px;display:none">下一张</p>          </div>          <img id="net" src="'+e+'" oncopy="return false;" style="width:100%;vertical-align: top;">        </div>    </div>    <div class="shadow" onclick="imgZoom.hideMenu()" style="position: absolute;width: 100%;height: 100%;background-color: rgb(0, 0, 0);top:0;left:0;opacity: 0.5;"/></div>',document.getElementsByClassName("shadow")[0].style.height=document.documentElement.offsetHeight+"px"}function t(t){if(t&&t.src){var o=document.getElementById("_imgzoom"),i=document.getElementsByClassName("imgzoom");if(!o&&i.length>0)e(t.src),n();else{var l=document.getElementById("_imgzoom"),d=document.getElementById("net"),s=document.getElementById("imgzoom_imglink");d.src=t.src,s.href=t.src,l.parentElement.style.display="block",l.style.top="50%",l.style.left="50%",l.style.width=c.width+"px"}}else console.log('缺少参数 src:Missing parameters "src"')}function n(){o("last"),o("next"),i(),s()}function o(e){var t=document.getElementById("_imgzoom").getElementsByClassName(e)[0];t.addEventListener("mousemove",function(){t.getElementsByTagName("p")[0].style.display="block"}),t.addEventListener("mouseout",function(){t.getElementsByTagName("p")[0].style.display="none"}),t.addEventListener("mousedown",function(e){e.stopPropagation()}),t.addEventListener("click",function(t){for(var n=document.getElementById("net").src,o=document.getElementsByClassName("imgzoom"),i=0;i<o.length;i++)if("next"==e){if(o[i].src==n&&i<o.length-1){document.getElementById("net").src=o[i+1].src,document.getElementById("imgzoom_imglink").href=o[i+1].src;break}document.getElementById("net").src=o[0].src,document.getElementById("imgzoom_imglink").href=o[0].src}else{if(o[i].src==n&&i>0){document.getElementById("net").src=o[i-1].src,document.getElementById("imgzoom_imglink").href=o[i-1].src;break}document.getElementById("net").src=o[o.length-1].src,document.getElementById("imgzoom_imglink").href=o[o.length-1].src}})}function i(){var e=document.getElementById("_imgzoom");e.addEventListener("mousewheel",function(t){t.preventDefault(),l(t,e)}),e.addEventListener("DOMMouseScroll",function(t){t.preventDefault(),l(t,e)})}function l(e,t){if(e.deltaY>0){var n=Math.round(.9*t.offsetWidth),o=Math.round(.9*t.offsetHeight);(n>360||o>270)&&(t.style.width=n+"px")}else{var i=Math.round(1.1*t.offsetWidth),l=Math.round(1.1*t.offsetHeight);(i<82500||l<46500)&&(t.style.width=i+"px")}}function d(){function e(){var e=document.getElementById("_imgzoom");if(window.innerWidth/window.innerHeight>=o.width/o.height){var t=(window.innerHeight-70)*o.width/o.height;n.style.width=t+"px"}else n.style.width=window.innerWidth-40+"px";e.style.top="50%",e.style.left="50%"}var t=document.getElementById("net").src,n=document.getElementById("_imgzoom"),o=new Image;o.src=t,o.complete?e():o.onload=function(){e()}}function s(){function e(e){var i=e.screenX-n,l=e.screenY-o;n=e.screenX,o=e.screenY;var d=t.offsetTop,s=t.offsetLeft;t.style.top=d+l+"px",t.style.left=s+i+"px"}var t=document.getElementById("_imgzoom"),n=void 0,o=void 0;t.addEventListener("mousedown",function(t){t.preventDefault(),n=t.screenX,o=t.screenY,window.addEventListener("mousemove",e)}),window.addEventListener("mouseup",function(t){window.removeEventListener("mousemove",e)})}function r(e){e&&e.width&&(c.width=e.width)}function a(){var e=document.getElementById("_imgzoom");e&&(e.parentElement.style.display="none")}function m(){return c.width}var c={width:1e3};return{open:t,option:r,resize:d,getWidth:m,hideMenu:a}}();